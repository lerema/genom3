#!/bin/sh
. ${0%${0##*/}}../test.sh

mkdir -p run.t


# --- service parameter ----------------------------------------------------
#
testing '[$service parameter]'

cat >run.gen <<EOF
component c;
service s(in long a, inout long b[2]);
EOF
run 0  ${GENOM_BIN} interactive -b run.gen <<'EOF'
foreach p [[[dotgen component] service] parameter] {
  puts -nonewline "[$p name] "
}
puts ""
EOF
expect out '
	/^a b $/ {next}
	{exit 2}
'

run 0 ${GENOM_BIN} interactive -b run.gen <<'EOF'
foreach p [[[dotgen component] service] parameter in] {
  puts -nonewline "[$p name] "
}
puts ""
EOF
expect out '
	/^a $/ {next}
	{exit 2}
'
